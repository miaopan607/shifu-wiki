---
import Layout from '../layouts/Layout.astro';
import { pb } from '../lib/pocketbase';
import SubPageNav from '../components/SubPageNav.astro';

// 实时从 PocketBase 获取所有歌曲
const allSongs = await pb.collection('songs').getFullList({
	sort: '-releaseDate', // 按发布日期倒序
});
---

<Layout title="音乐 | 黄诗扶 Wiki">
	<main class="min-h-screen bg-[rgb(77,0,0)] p-8 md:p-20 font-serif">
		<div class="max-w-2xl mx-auto">
			<header class="mb-16">
				<a href="/" class="text-lg text-red-300 hover:text-[#c9c9c9] transition-colors">← 返回首页</a>
				<SubPageNav activePage="songs" />
			</header>

			<div class="space-y-10">
				{
					allSongs.map((song) => (
						<a href={`/songs/${song.index}`} class="group block border-b border-[#c9c9c9]/20 pb-8 hover:border-red-300/50 transition-all">
							<div class="flex justify-between items-end">
								<div>
									<h2 class="text-2xl text-[#c9c9c9] group-hover:text-red-300 transition-colors">{song.title}</h2>
									<p class="text-[#888] mt-2 tracking-widest text-sm">
										{song.album} · {song.releaseDate}
									</p>
								</div>
								<span class="text-red-300 opacity-0 group-hover:opacity-100 transition-all translate-x-4 group-hover:translate-x-0">详情 →</span>
							</div>
						</a>
					))
				}
			</div>
		</div>
	</main>
</Layout>
